<VirtualHost *:443>
  ServerName localhost
  ServerAlias www.localhost
  ServerAdmin admin@localhost.com

  <Directory "/usr/local/apache2/htmlfiles">
    Order allow,deny
    AllowOverride All
    Allow from all
    Require all granted
  </Directory>
  DocumentRoot /usr/local/apache2/htmlfiles

  CustomLog logs/localhost-access.log combined
  ErrorLog logs/localhost-error.log

  # Example SSL configuration
  LoadModule ssl_module modules/mod_ssl.so
  SSLEngine on
  SSLProxyEngine on
  RequestHeader set X-Forwarded-Proto "https"
  RequestHeader set X-Forwarded-Port "443"
  SSLProtocol all -SSLv2
  SSLCipherSuite HIGH:MEDIUM:!aNULL:!MD5
  SSLCertificateFile "/var/www/localhost/ssl/jupyter.crt"
  SSLCertificateKeyFile "/var/www/localhost/ssl/jupyter.key"

  ProxyPass / http://proxy/
  ProxyPassReverse / http://proxy/

  RewriteEngine on
  RewriteCond %{HTTP:UPGRADE} ^WebSocket$ [NC]
  RewriteCond %{HTTP:CONNECTION} ^Upgrade$ [NC]
  RewriteRule .* ws://proxy%{REQUEST_URI} [P]

</VirtualHost>
